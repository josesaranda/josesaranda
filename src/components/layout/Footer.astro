---
import { Trans } from "astro-i18next/components";
import i18next, { t } from "i18next";

const GH_TOKEN = import.meta.env.GH_TOKEN;
const URL =
  "https://api.github.com/repos/josesaranda/josesaranda/commits?per_page=1";
const response = await fetch(URL, {
  headers: {
    Authorization: `Bearer ${GH_TOKEN}`,
  },
});

const [data] = await response.json();

const date = new Date(data.commit.author.date);
const url = data.html_url;
---

<footer>
  <div>
    <Trans i18nKey="footer.title">
      <span id="love"></span>
    </Trans>
  </div>
  <a href={url} target="_blank">
    <strong>{t("footer.date")}:</strong>
    <time datetime={date.toISOString()}
      >{date.toLocaleDateString(i18next.language)} -
      {date.toLocaleTimeString(i18next.language)}</time
    >
  </a>
</footer>
<style>
  footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-2);
    font-size: var(--font-0);
  }

  @media (max-width: 768px) {
    footer {
      flex-direction: column-reverse;
    }
  }

  a:hover {
    transform: scale(1) !important;
  }
</style>
